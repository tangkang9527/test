<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>简化</title>
	</head>
	<body>
		<h1>async-await写法</h1>
		<!-- 导入js jar包 -->
		<script src="../js/axios.js"></script>
		<script>
			//1.指定请求前缀
			axios.defaults.baseURL = "http://localhost:8090"
			
			/**
			 * 需求: 要求ajax请求在一行完成!
			 * 解决方案: async-await
			 * 语法说明:
			 * 		1.async 必须标识函数方法
			 * 		2.await 必须标识ajax请求
			 *  实际意义:
			 * 		解决了ajax中的头号难题, "回调地狱"问题
			 */
			
			axios.get("xxxx")
				 .then(user => {
					 axios.get("xxx",{params: user}).then( dog => {
						 axios.get("xxx",{params: dog})
							.then(xxx => {
								xxxxx
							})
					 })
				 })
			
			let aaa = await axios.get("/getUser")
			let bbb = await axios.get2("/getUser",{params:aaa})
			let ccc = await axios.get2("/getUser",{params:aaa})
			
			
			//1.定义函数
			async function getUser(){
				let promise = await axios.get("/getUser")
				console.log(promise.data)
				
				//解构赋值 固定写法 死记硬背
				let {data: result} = await axios.get("/getUser")
				console.log(result)
			}
			//2.调用函数
			getUser()
		</script>
	</body>
</html>
